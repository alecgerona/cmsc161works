<!DOCTYPE html>
<html>
<head>
  <title>
      Mauritius Flag
  </title>

  <!--Import external javascript file-->
  <!--Helper javascript methods for initializing webgl-->
  <script src="./lib/webgl-init.js"></script>
  <script src="./lib/webgl-utils.js"></script>
  <script src="./lib/webgl-debug.js"></script>

  <!--Vertex Shader-->
  <script type="x-shader/x-vertex" id="vshader">
    //declare an attribute variable that can be accessed in our javascript program
    attribute vec4 aPosition;
    void main() {

      //Built-in variable in GLSL ES that dictates the position of the vertex
      gl_Position = aPosition;

      //Built-in variable in GLSL ES that dictates the size of the vertex
      gl_PointSize = 10.0;
    }
  </script>

  <!--Fragment Shader-->
  <script type="x-shader/x-fragment" id="fshader">
    //specifies the precision qualifer for the variable float
    precision mediump float;

    //declare and uniform variable that can be accessed in our javascript program
    uniform vec4 uFragColor;
    void main() {


      //Sets the color for every fragment created by primitive assembly
      gl_FragColor = uFragColor;
    }
  </script>


  <script>
  function main() {
    //Retrieve <canvas> element
    var canvas = document.getElementById("main_canvas");
    if(!canvas) {
        console.log("Failed to retrieve the <canvas> element");
    }

    //Get the rendering context (WebGL)
    var gl = initializeWebGL(canvas,true);

    //initialize shaders program
    var vertexShader = initializeShader(gl,"vshader");
    var fragmentShader = initializeShader(gl, "fshader");
    var program = initializeProgram(gl,vertexShader,fragmentShader);
    gl.useProgram(program);

    //clear canvas
    gl.clearColor(1.0, 1.0, 1.0, 1.0);
    gl.clear(gl.COLOR_BUFFER_BIT);

    //Get the storage location of shader variables
    var aPositionPointer = gl.getAttribLocation(program,"aPosition");
    var uFragColorPointer = gl.getUniformLocation(program,"uFragColor");


    /**Draw Carbink's horn**/
    var vertices = [
    -0.0812, 0.5333, 0, 1.0,  //vertex 1
    -0.1661, 0.6926, 0, 1.0,  //vertex 2
    -0.1328, 0.8519, 0, 1.0,  //vertex 3
    -0.0661, 0.9185, 0, 1.0,  //vertex 4
    -0.0147, 0.8778, 0, 1.0,  //vertex 5
     0.0441, 0.7037, 0, 1.0,  //vertex 6
    ];
    var vertexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW);
    gl.vertexAttribPointer(aPositionPointer,4,gl.FLOAT,false,0,0);
    gl.enableVertexAttribArray(aPositionPointer);
    

    //Set color in fragment shader
    gl.uniform4f(uFragColorPointer,0.0,0.0,0.0,1.0);
    //Execute vertex shader
    gl.drawArrays(gl.LINE_LOOP, 0, 6);

    /**Draw Carbink's Head**/
    var vertices = [
    -0.9889, 0.7037, 0, 1.0,  //vertex 1
    -0.6015, 0.8444, 0, 1.0,  //vertex 2
    -0.1661, 0.6926, 0, 1.0,  //vertex 3
    -0.0812, 0.5333, 0, 1.0,  //vertex 4
     0.0441, 0.7037, 0, 1.0,  //vertex 5
     0.5018, 0.8148, 0, 1.0,  //vertex 6
     0.9668, 0.6741, 0, 1.0,  //vertex 7
     0.5166, 0.5593, 0, 1.0,  //vertex 8
     0.2546, 0.6037, 0, 1.0,  //vertex 9
     0.3395, 0.5074, 0, 1.0,  //vertex 10
     0.1624, 0.3889, 0, 1.0,  //vertex 11
     0.0480, 0.4556, 0, 1.0,  //vertex 12
    -0.0701, 0.4852, 0, 1.0,  //vertex 13
    -0.1919, 0.4556, 0, 1.0,  //vertex 14
    -0.2841, 0.3852, 0, 1.0,  //vertex 15
    -0.4539, 0.5037, 0, 1.0,  //vertex 16
    -0.3579, 0.6000, 0, 1.0,  //vertex 17
    -0.6125, 0.5667, 0, 1.0,  //vertex 18
    ];
    var vertexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW);
    gl.vertexAttribPointer(aPositionPointer,4,gl.FLOAT,false,0,0);
    gl.enableVertexAttribArray(aPositionPointer);
    

    //Set color in fragment shader
    gl.uniform4f(uFragColorPointer,0.0,0.0,0.0,1.0);
    //Execute vertex shader
    gl.drawArrays(gl.LINE_LOOP, 0, 18);

    /**Draw Carbink's Scarf**/
    var vertices = [
    -0.5867, 0.5185, 0, 1.0,  //vertex 1
    -0.4539, 0.5037, 0, 1.0,  //vertex 2
    -0.2841, 0.3852, 0, 1.0,  //vertex 3
    -0.1919, 0.4556, 0, 1.0,  //vertex 4
    -0.0701, 0.4852, 0, 1.0,  //vertex 5
     0.0480, 0.4556, 0, 1.0,  //vertex 6
     0.1624, 0.3889, 0, 1.0,  //vertex 7
     0.3395, 0.5074, 0, 1.0,  //vertex 8
     0.5387, 0.4852, 0, 1.0,  //vertex 9
     0.4852, 0.3593, 0, 1.0,  //vertex 10
     0.6199, 0.1852, 0, 1.0,  //vertex 11
     0.4649, 0.1111, 0, 1.0,  //vertex 12
     0.2325, 0.1370, 0, 1.0,  //vertex 13
     0.1107, 0.0741, 0, 1.0,  //vertex 14
    -0.0738, 0.0481, 0, 1.0,  //vertex 15
    -0.2804, 0.0815, 0, 1.0,  //vertex 16
    -0.3801, 0.1519, 0, 1.0,  //vertex 17
    -0.5904, 0.1259, 0, 1.0,  //vertex 18
    -0.7269, 0.2222, 0, 1.0,  //vertex 19
    -0.6753, 0.3148, 0, 1.0,  //vertex 20
    -0.5793, 0.3852, 0, 1.0,  //vertex 21
    -0.6162, 0.4667, 0, 1.0,  //vertex 22
    ];
    var vertexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertices),gl.STATIC_DRAW);
    gl.vertexAttribPointer(aPositionPointer,4,gl.FLOAT,false,0,0);
    gl.enableVertexAttribArray(aPositionPointer);
    

    //Set color in fragment shader
    gl.uniform4f(uFragColorPointer,0.0,0.0,0.0,1.0);
    //Execute vertex shader
    gl.drawArrays(gl.LINE_LOOP, 0, 22);

    
  }
  </script>
</head>

<body onload="main()" style="text-align: center">
	<canvas id="main_canvas" width="542" height="540" style="border: 1px black solid">
	</canvas>
  <h1>
    Carbink
  </h1>
</body>
</html>
